
  <ngx-datatable 
    #dataTable
    class="material expandable" 
    [rows]="rows"
    [columns]="metrics"
    [headerHeight]="50"
    [sortType]="SortType.multi"
    [footerHeight]="50"
    [rowHeight]="auto"
    [sorts]="[{ prop: 'agg', dir: 'desc' }]"
    *ngIf="dataReady"
  >
    <!-- Group Header Template -->
    <!-- <ngx-datatable-group-header [rowHeight]="50" #myGroupHeader> -->
        <!-- <ng-template let-group="group" let-expanded="expanded" ngx-datatable-group-header-template>
          <div style="padding-left:5px;">
            <a
              href="#"
              [class.datatable-icon-right]="!expanded"
              [class.datatable-icon-down]="expanded"
              title="Expand/Collapse Group"
              (click)="toggleExpandGroup(group)"
            >
              <span> {{group.value[0].networkCode | uppercase }} </span>
              <span> {{ group.value[0].stationCode | uppercase}} </span>
              <span> ({{group.value.length}} {{group.value.length == 1? "channel" : "channels"}})</span>
            </a>
          </div>
        </ng-template>
      </ngx-datatable-group-header> -->


      <ngx-datatable-column
      name="agg"
      frozenLeft="true"
      [width]="20"
      [sortable]="true"
      >
        <ng-template 
        ngx-datatable-cell-template
        let-row="row"
        >
        {{row.agg}}
  
        </ng-template>
          <!-- TODO: most recent instead of average -->
    
      </ngx-datatable-column>

    <ngx-datatable-column 
      name="Channels"
      frozenLeft="True"
    >
      <ng-template ngx-datatable-cell-template let-value="value" let-row="row" >
        {{row.nslc}}
      </ng-template>
    </ngx-datatable-column> 

    <ng-container *ngFor="let metric of metrics">
      <ngx-datatable-column  prop="{{metric.id}}" [cellClass]="getCellClass">
          <ng-template let-column="column" ngx-datatable-header-template> 
              {{metric.name}}
            </ng-template>
          <ng-template ngx-datatable-cell-template let-value="value" let-row="row" >
              {{value.value != null ? value.value : "No Data"}}
          </ng-template>
      </ngx-datatable-column>
    </ng-container>


  </ngx-datatable>

  <!-- aggregate count # of fails right side column-->
  <!-- color time table thing -->
  <!-- line with dots  -->