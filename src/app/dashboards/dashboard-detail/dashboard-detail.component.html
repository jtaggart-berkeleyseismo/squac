<div *ngIf="dashboard" id="dashboard-container">
    <mat-toolbar id="dashboard-header" >
      <div id="dashboard-info">
          <h2>
              {{dashboard.name}}
          </h2>
      </div>
        <div id="header-controls">
          <button mat-flat-button color="accent" (click)="saveDashboard()" *ngIf="unsaved">
            <mat-icon >save</mat-icon>
            Save
          </button>
          <button mat-icon-button (click)="refreshData()" color="primary" aria-label="refresh data">
              <mat-icon >refresh</mat-icon>  
          </button>
          <mat-form-field id="date-range">
              <mat-select 
                [(value)]="selectedDateRange"
                (selectionChange)="selectDateRange($event)"
                >
                <mat-option *ngFor="let range of dateRanges"
                  [value]="range"
                >
                  {{range.name}}
                </mat-option>
              </mat-select>
          </mat-form-field>

          <mat-menu #appMenu="matMenu" class="mat-menu-dense" yPosition="below" xPosition="before">
            <button mat-menu-item (click)="addWidget()">Add Widget</button>
            <button mat-menu-item (click)="editDashboard()">Edit Dashboard Information</button>
            <!-- <button mat-menu-item color="warn">Delete Dashboard</button> -->
          </mat-menu>
          
          <button mat-icon-button [matMenuTriggerFor]="appMenu" color="primary">
            <mat-icon>settings_application</mat-icon>
          </button>
        </div>

      </mat-toolbar>
      <mat-progress-bar
        *ngIf="status == 'loading'"
        [mode]="indeterminate"
        >
      </mat-progress-bar>
      <ng-container *ngIf="dashboard.widgetIds.length > 0; else noWidgets">
        <app-widget >
        </app-widget>
      </ng-container>
      <ng-template #noWidgets>
        <div id="add-widget">
          <p>
            There are no widgets for this dashboard...
          </p>
          <button  mat-flat-button color="accent" aria-label="Add widget" (click)="addWidget()">
            Add Widget
          </button>
        </div>

      </ng-template>

</div>

<app-loading *ngIf="!dashboard"></app-loading>
