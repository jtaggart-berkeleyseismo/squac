<h3 mat-dialog-title>{{ editMode ? "Edit Widget" : "New Widget"}}</h3>
<div mat-dialog-content id="edit-container">
  <form action="" [formGroup]="widgetForm">
    <mat-form-field>
      <input matInput 
        type="text" 
        id="name" 
        formControlName="name" 
        placeholder="Widget name"
      >
    </mat-form-field>
    <mat-form-field>
      <textarea matInput 
        id="description" 
        formControlName="description" 
        class="form-control"
        placeholder="Widget description"
        >
      </textarea>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Widget Type</mat-label>
      <mat-select formControlName="type" *ngIf="widgetTypes">
        <mat-option *ngFor="let type of widgetTypes" [value]="type.id">
          {{type.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Stat type</mat-label>
      <mat-select formControlName="method" *ngIf="widgetTypes">
        <mat-option *ngFor="let method of calcMethods" [value]="method">
          {{method}}
        </mat-option>
      </mat-select>
    </mat-form-field>

  </form>

    <mat-tab-group [color]="primary">
      <!-- TODO: separate component -->
      <mat-tab label="Metrics">
        <div class="edit-tab-body">
          <input
          type="text"
          style="padding:8px;margin:15px auto;width:30%;"
          placeholder="Type to filter the metric name column..."
          (keyup)="updateFilter($event)"
          />

          <div>
            {{tableRows.length}}
            <ngx-datatable
            id="metric-select-table"
              style="width: 100%"
              class="material"
              [rows]="tableRows"
              [columnMode]="ColumnMode.force"
              [headerHeight]="50"
              [rowHeight]="30"
              [scrollbarV]="true"
              [selected]="selectedMetrics"
              [selectionType]="SelectionType.checkbox"
              [selectAllRowsOnPage]="false"
              [displayCheck]="displayCheck"
              (select)="metricsSelected($event)"
            >
              <ngx-datatable-column
                [width]="30"
                [sortable]="false"
                [canAutoResize]="false"
                [draggable]="false"
                [resizeable]="false"
                [headerCheckboxable]="true"
                [checkboxable]="true"
              >
              </ngx-datatable-column>
              <ngx-datatable-column name="Name"></ngx-datatable-column>
              <ngx-datatable-column name="Unit"></ngx-datatable-column>
              <ngx-datatable-column name="Description"></ngx-datatable-column>
            </ngx-datatable>
          </div>
        </div>

      </mat-tab>
      <mat-tab label="Channels" class="edit-tab-body">
        <div class="edit-tab-body">
          Coming soon 
        </div>
      </mat-tab>
      <mat-tab label="Thresholds" class="edit-tab-body">
        <div class="edit-tab-body">
          Coming soon 
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
<div mat-dialog-actions>
  <button mat-flat-button color="primary" (click)="save()" [disabled]='!widgetForm.valid'>Save</button>
  <button mat-button type="button" class="warning" (click)="cancel()">Cancel</button>
</div>
